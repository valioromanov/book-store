// Code generated by goa v3.14.1, DO NOT EDIT.
//
// book service
//
// Command:
// $ goa gen book-store/design

package book

import (
	bookviews "book-store/design/gen/book/views"
	"context"

	goa "goa.design/goa/v3/pkg"
)

// The book service performs operations for books
type Service interface {
	// GetBook implements getBook.
	GetBook(context.Context, *GetBookPayload) (res *BookResult, err error)
	// PostBook implements postBook.
	PostBook(context.Context, *BookReq) (res *BookResult, err error)
}

// ServiceName is the name of the service as defined in the design. This is the
// same value that is set in the endpoint request contexts under the ServiceKey
// key.
const ServiceName = "book"

// MethodNames lists the service method names as defined in the design. These
// are the same values that are set in the endpoint request contexts under the
// MethodKey key.
var MethodNames = [2]string{"getBook", "postBook"}

// BookReq is the payload type of the book service postBook method.
type BookReq struct {
	Title       string
	Author      string
	BookCover   []byte
	PublishedAt *string
}

// BookResult is the result type of the book service getBook method.
type BookResult struct {
	// ID of the book
	ID *int
	// of the book
	Title *string
	// author of the book
	Author *string
	// cover of the book
	BookCover []byte
	// cover of the book
	PublishedAt *string
}

// GetBookPayload is the payload type of the book service getBook method.
type GetBookPayload struct {
	// Book ID
	BookID int
}

// MakeNotFound builds a goa.ServiceError from an error.
func MakeNotFound(err error) *goa.ServiceError {
	return goa.NewServiceError(err, "NotFound", false, false, false)
}

// MakeBadRequest builds a goa.ServiceError from an error.
func MakeBadRequest(err error) *goa.ServiceError {
	return goa.NewServiceError(err, "BadRequest", false, false, false)
}

// NewBookResult initializes result type BookResult from viewed result type
// BookResult.
func NewBookResult(vres *bookviews.BookResult) *BookResult {
	var res *BookResult
	switch vres.View {
	case "default", "":
		res = newBookResult(vres.Projected)
	case "resultOperation":
		res = newBookResultResultOperation(vres.Projected)
	}
	return res
}

// NewViewedBookResult initializes viewed result type BookResult from result
// type BookResult using the given view.
func NewViewedBookResult(res *BookResult, view string) *bookviews.BookResult {
	var vres *bookviews.BookResult
	switch view {
	case "default", "":
		p := newBookResultView(res)
		vres = &bookviews.BookResult{Projected: p, View: "default"}
	case "resultOperation":
		p := newBookResultViewResultOperation(res)
		vres = &bookviews.BookResult{Projected: p, View: "resultOperation"}
	}
	return vres
}

// newBookResult converts projected type BookResult to service type BookResult.
func newBookResult(vres *bookviews.BookResultView) *BookResult {
	res := &BookResult{
		ID:          vres.ID,
		Title:       vres.Title,
		Author:      vres.Author,
		BookCover:   vres.BookCover,
		PublishedAt: vres.PublishedAt,
	}
	return res
}

// newBookResultResultOperation converts projected type BookResult to service
// type BookResult.
func newBookResultResultOperation(vres *bookviews.BookResultView) *BookResult {
	res := &BookResult{
		ID: vres.ID,
	}
	return res
}

// newBookResultView projects result type BookResult to projected type
// BookResultView using the "default" view.
func newBookResultView(res *BookResult) *bookviews.BookResultView {
	vres := &bookviews.BookResultView{
		ID:          res.ID,
		Title:       res.Title,
		Author:      res.Author,
		BookCover:   res.BookCover,
		PublishedAt: res.PublishedAt,
	}
	return vres
}

// newBookResultViewResultOperation projects result type BookResult to
// projected type BookResultView using the "resultOperation" view.
func newBookResultViewResultOperation(res *BookResult) *bookviews.BookResultView {
	vres := &bookviews.BookResultView{
		ID: res.ID,
	}
	return vres
}
